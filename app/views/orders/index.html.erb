
<div class='transaction-contents'>
  <div class='transaction-main'>
    <h1 class='transaction-title-text'>
      購入内容の確認
    </h1>
    <%= link_to "戻る", country_path(@country.id) %>
    <%# 購入内容の表示 %>
    <% if @country.plane %>
    <div> 選択した飛行機情報 </div>
    <div>飛行機名<%=@plane.name%></div>
    <div>料金<%=@plane.price%>円</div>
    <div>人数<%=@plane.howmany%>人</div>
    <div>行きの日程<%=@plane.go_date%></div>
    <div>帰りの日程<%=@plane.back_date%></div>
    <div>行きの出発時間<%=@plane.go_time%></div>
    <div>帰りの出発時間<%=@plane.back_time%></div>
    <div>合計金額<%=@plane.price * @plane.howmany%>円</div>
    <div>
    <% end %>

    <% if @country.plane_go %>
    <div> 選択した飛行機情報 </div>
    <div>飛行機名<%=@plane_go.name%></div>
    <div>料金<%=@plane_go.price%>円</div>
    <div>人数<%=@plane_go.howmany%>人</div>
    <div>行きの日程<%=@plane_go.go_date%></div>
    <div>行きの出発時間<%=@plane_go.go_time%></div>
    <div>合計金額<%=@plane_go.price * @plane_go.howmany%>円</div>
    <div>
    <% end %>

    <% if @country.plane_back %>
    <div> 選択した飛行機情報 </div>
    <div>飛行機名<%=@plane_back.name%></div>
    <div>料金<%=@plane_back.price%>円</div>
    <div>人数<%=@plane_back.howmany%>人</div>
    <div>帰りの日程<%=@plane_back.back_date%></div>
    <div>帰りの出発時間<%=@plane_back.back_time%></div>
    <div>合計金額<%=@plane_back.price * @plane_back.howmany%>円</div>
    <div>
    <% end %>

    <% if @country.hotel %>
    <div> 選択したホテル情報 </div>
    <div>ホテル名<%=@hotel.name%></div>
    <div>料金<%=@hotel.price%>円</div>
    <div>人数<%=@hotel.howmany%>人</div>
    <div>宿泊日数<%=@hotel.day%>日</div>
    <div>チェックイン日<%=@hotel.go_date%></div>
    <div>チェックアウト日<%=@hotel.back_date%></div>
    <div>合計金額<%=@hotel.price * @hotel.day * @hotel.howmany %>円</div>
    <div>
    <% end %>

    <% if @country.tour %>
    <div> 選択したツアー情報 </div>
    <div>ツアー名<%=@tour.name%></div>
    <div>料金<%=@tour.price%>円</div>
    <div>期間<%=@tour.span%>日</div>
    <div>人数<%=@tour.howmany%>人</div>
    <div>出発日<%=@tour.go_date%></div>
    <div>合計金額<%=@tour.price * @tour.howmany %>円</div>
    <div>
    <% end %>

    <div>お支払い金額
    <%# 合計金額　単体の場合は書かなくても良いかも　かぶる %>
   <% if @country.tour%>
    <%= @tour.price * @tour.howmany%>
    <% elsif @country.plane && @country.hotel%>
    <%= @plane.price * @plane.howmany + @hotel.price * @hotel.day * @hotel.howmany%>
    <% elsif @country.plane%>
    <%= @plane.price * @plane.howmany%>
    <% elsif @country.plane_go && @country.plane_back && @country.hotel%>
    <%= @plane_go.price * @plane_go.howmany + @plane_back.price * @plane_back.howmany + @hotel.price * @hotel.day * @hotel.howmany%>
    <% elsif @country.plane_go && @country.hotel%>
    <%= @plane_go.price * @plane_go.howmany + @hotel.price * @hotel.day * @hotel.howmany%>
    <% elsif @country.plane_back && @country.hotel%>
    <%= @plane_back.price * @plane_back.howmany + @hotel.price * @hotel.day * @hotel.howmany%>
    <% elsif @country.plane_go && @country.plane_back%>
    <%= @plane_go.price * @plane_go.howmany + @plane_back.price * @plane_back.howmany%>
    <% elsif @country.hotel%>
    <%= @hotel.price * @hotel.day * @hotel.howmany%>
    <% elsif @country.plane_go%>
    <%= @plane_go.price * @plane_go.howmany%>
    <% elsif @country.plane_back%>
    <%= @plane_back.price * @plane_back.howmany%>
    <% else %>
    ◯◯
    <% end %>
    円</div>
    <%# /購入内容の表示 %>

    <%# 支払額の表示 %>
    
    <%# /支払額の表示 %>

     <%= form_with model: @order, url: country_orders_path(@country), id: 'charge-form', class: 'transaction-form-wrap',local: true do |f| %> 
     <%= render 'shared/error_messages', model: @order %> 
    <%# カード情報の入力 %>
    <div class='credit-card-form'>
      <h1 class='info-input-haedline'>
        クレジットカード情報入力
      </h1>
      <div class="form-group">
        <div class='form-text-wrap'>
          <label class="form-text">カード情報</label>
          <span class="indispensable">必須</span>
        </div>
        <%= f.text_field 'number', class:"input-default", id:"card-number", placeholder:"カード番号(半角英数字)", maxlength:"16" %>
        <div class='available-card'>
          <%= image_tag 'card-visa.gif', class: 'card-logo'%>
          <%= image_tag 'card-mastercard.gif', class: 'card-logo'%>
          <%= image_tag 'card-jcb.gif', class: 'card-logo'%>
          <%= image_tag 'card-amex.gif', class: 'card-logo'%>
        </div>
      </div>
      <div class="form-group">
        <div class='form-text-wrap'>
          <label class="form-text">有効期限</label>
          <span class="indispensable">必須</span>
        </div>
        <div class='input-expiration-date-wrap'>
          <%= f.text_area 'month', class:"input-expiration-date", id:"card-exp-month", placeholder:"例)3" %>
          <p>月</p>
          <%= f.text_area 'year', class:"input-expiration-date", id:"card-exp-year", placeholder:"例)23" %>
          <p>年</p>
        </div>
      </div>
      <div class="form-group">
        <div class='form-text-wrap'>
          <label class="form-text">セキュリティコード</label>
          <span class="indispensable">必須</span>
        </div>
        <%= f.text_field "cvc",class:"input-default", id:"card-cvc", placeholder:"カード背面4桁もしくは3桁の番号", maxlength:"4" %>
      </div>
    </div>
    <%# /カード情報の入力 %>
    
    <%# 配送先の入力 %>
    <div class="form-group">
    パスポート情報
    <div class="weight-bold-text">
          パスポート番号
          <span class="indispensable">必須</span>
    </div>
    <%= f.text_field :passport_number %>

    <div class="weight-bold-text">
          姓
          <span class="indispensable">必須</span>
    </div>
    <%= f.text_field :first_name %>

    <div class="weight-bold-text">
          名
          <span class="indispensable">必須</span>
    </div>
    <%= f.text_field :last_name %>

    <div class="weight-bold-text">
          国籍
          <span class="indispensable">必須</span>
    </div>
    <%= f.text_field :nationality %>
 
  
    <div class='form-text-wrap'>
      <label class="form-text">生年月日</label>
      <span class="indispensable">必須</span>
    </div>
    <div class='input-birth-wrap'>
      <%= raw sprintf(
                  f.date_select(
                    :birthday,
                    class:'select-birth',
                    id:"birth-date",
                    use_month_numbers: true,
                    prompt:'--',
                    start_year: 1930,
                    end_year: (Time.now.year - 5),
                    date_separator: '%s'),
                  "<p> 年 </p>", "<p> 月 </p>") + "<p> 日 </p>" %>
    </div>
   
    
    

    <div class="weight-bold-text">
          性別
          <span class="indispensable">必須</span>
    </div>
    <select name= "order_info[gender]">
    <option value= "" ></option>
    <option value= "男" >男</option>
    <option value= "女" >女</option>
    </select>

    <div class='form-text-wrap'>
    <div class="weight-bold-text">
          本籍
          <span class="indispensable">必須</span>
    </div>
    <%= f.text_field :registered_place %>
    <div class='form-text-wrap'>
    <label class="form-text">発行年月日</label>
      <span class="indispensable">必須</span>
    </div>
    <div class='input-birth-wrap'>
    <%= raw sprintf(
                  f.date_select(
                    :issue_date,
                    class:'select-birth',
                    id:"issue-date",
                    use_month_numbers: true,
                    prompt:'--',
                    start_year: 2011,
                  
                    end_year: (Time.now.year - 1),
                    date_separator: '%s'),
                  "<p> 年 </p>", "<p> 月 </p>") + "<p> 日 </p>"%>
    </div>

    <div class='form-text-wrap'>
    <label class="form-text">有効期限満了日</label>
      <span class="indispensable">必須</span>
    </div>
    <div class='input-birth-wrap'>
   <%= raw sprintf(
                  f.date_select(
                    :expiry_date,
                    class:'select-birth',
                    id:"expiry-date",
                    use_month_numbers: true,
                    prompt:'--',
                    start_year: (Time.now.year + 1),
                    end_year: (Time.now.year + 10),
                    date_separator: '%s'),
                  "<p> 年 </p>", "<p> 月 </p>") + "<p> 日 </p>" %>
    
    </div>

    <%# /配送先の入力 %>
    <div class='buy-btn'>
      <%= f.submit "購入" ,class:"buy-red-btn" %>
    </div>
    <% end %>
  </div>
</div>
</div>
